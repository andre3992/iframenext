{"ast":null,"code":"function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nexport const insertLead = (campaignData, formData, router) => {\n  let fullData = _objectSpread({}, campaignData);\n\n  fullData.formData = formData;\n  let dataToSend = {};\n  dataToSend.name = fullData.formData.name ? fullData.formData.name : \"\";\n  dataToSend.phone = fullData.formData.phoneNumber ? fullData.formData.phoneNumber : \"\";\n  dataToSend.condicoes = fullData.formData.termosEcondicoes ? fullData.formData.termosEcondicoes : \"\";\n  dataToSend.email = fullData.formData.email ? fullData.formData.email : \"\";\n  dataToSend.type = fullData.formData.formType ? fullData.formData.formType : \"\";\n  dataToSend.context = fullData.formData.context ? fullData.formData.context : \"\";\n\n  for (const utm in fullData.params) {\n    dataToSend[utm] = fullData.params[utm];\n  }\n\n  dataToSend.convcode = fullData.campaignData.defaultCampaignData.convcode ? fullData.campaignData.defaultCampaignData.convcode : \"\";\n  dataToSend.ip = fullData.campaignData.defaultCampaignData.ip;\n  dataToSend.source = fullData.campaignData.defaultCampaignData.source;\n  dataToSend.surname = fullData.campaignData.comercializador;\n  dataToSend.secret = process.env.NEXT_PUBLIC_API_SECRET;\n  console.log(dataToSend);\n  let options = {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(dataToSend)\n  };\n  {\n    fetch(`${process.env.NEXT_PUBLIC_API_URL}/api/insert`, options).then(result => {\n      /*router.push(\r\n        `/gracias/?convtype=${dataToSend.tsource}${\r\n          dataToSend.convcode !== \"\" ? \"&conv=\" + dataToSend.convcode : \"\"\r\n        }`\r\n      );*/\n      return true;\n    }).catch(err => {\n      router.push(\"/404\");\n      return false;\n    });\n  }\n};","map":{"version":3,"sources":["C:/Users/BO0004/Desktop/repositorios/iframe-endesapt/controllers/postData.js"],"names":["insertLead","campaignData","formData","router","fullData","dataToSend","name","phone","phoneNumber","condicoes","termosEcondicoes","email","type","formType","context","utm","params","convcode","defaultCampaignData","ip","source","surname","comercializador","secret","process","env","NEXT_PUBLIC_API_SECRET","console","log","options","method","headers","body","JSON","stringify","fetch","NEXT_PUBLIC_API_URL","then","result","catch","err","push"],"mappings":";;;;;;AAAA,OAAO,MAAMA,UAAU,GAAG,CAACC,YAAD,EAAeC,QAAf,EAAyBC,MAAzB,KAAoC;AAC5D,MAAIC,QAAQ,qBAAQH,YAAR,CAAZ;;AACAG,EAAAA,QAAQ,CAACF,QAAT,GAAoBA,QAApB;AAEA,MAAIG,UAAU,GAAG,EAAjB;AACAA,EAAAA,UAAU,CAACC,IAAX,GAAkBF,QAAQ,CAACF,QAAT,CAAkBI,IAAlB,GAAyBF,QAAQ,CAACF,QAAT,CAAkBI,IAA3C,GAAkD,EAApE;AACAD,EAAAA,UAAU,CAACE,KAAX,GAAmBH,QAAQ,CAACF,QAAT,CAAkBM,WAAlB,GACfJ,QAAQ,CAACF,QAAT,CAAkBM,WADH,GAEf,EAFJ;AAGAH,EAAAA,UAAU,CAACI,SAAX,GAAuBL,QAAQ,CAACF,QAAT,CAAkBQ,gBAAlB,GACnBN,QAAQ,CAACF,QAAT,CAAkBQ,gBADC,GAEnB,EAFJ;AAGAL,EAAAA,UAAU,CAACM,KAAX,GAAmBP,QAAQ,CAACF,QAAT,CAAkBS,KAAlB,GAA0BP,QAAQ,CAACF,QAAT,CAAkBS,KAA5C,GAAoD,EAAvE;AACAN,EAAAA,UAAU,CAACO,IAAX,GAAkBR,QAAQ,CAACF,QAAT,CAAkBW,QAAlB,GACdT,QAAQ,CAACF,QAAT,CAAkBW,QADJ,GAEd,EAFJ;AAIAR,EAAAA,UAAU,CAACS,OAAX,GAAqBV,QAAQ,CAACF,QAAT,CAAkBY,OAAlB,GACjBV,QAAQ,CAACF,QAAT,CAAkBY,OADD,GAEjB,EAFJ;;AAGA,OAAK,MAAMC,GAAX,IAAkBX,QAAQ,CAACY,MAA3B,EAAmC;AACjCX,IAAAA,UAAU,CAACU,GAAD,CAAV,GAAkBX,QAAQ,CAACY,MAAT,CAAgBD,GAAhB,CAAlB;AACD;;AACDV,EAAAA,UAAU,CAACY,QAAX,GAAsBb,QAAQ,CAACH,YAAT,CAAsBiB,mBAAtB,CAA0CD,QAA1C,GAClBb,QAAQ,CAACH,YAAT,CAAsBiB,mBAAtB,CAA0CD,QADxB,GAElB,EAFJ;AAGAZ,EAAAA,UAAU,CAACc,EAAX,GAAgBf,QAAQ,CAACH,YAAT,CAAsBiB,mBAAtB,CAA0CC,EAA1D;AACAd,EAAAA,UAAU,CAACe,MAAX,GAAoBhB,QAAQ,CAACH,YAAT,CAAsBiB,mBAAtB,CAA0CE,MAA9D;AACAf,EAAAA,UAAU,CAACgB,OAAX,GAAqBjB,QAAQ,CAACH,YAAT,CAAsBqB,eAA3C;AACAjB,EAAAA,UAAU,CAACkB,MAAX,GAAoBC,OAAO,CAACC,GAAR,CAAYC,sBAAhC;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAYvB,UAAZ;AACA,MAAIwB,OAAO,GAAG;AACZC,IAAAA,MAAM,EAAE,MADI;AAEZC,IAAAA,OAAO,EAAE;AACP,sBAAgB;AADT,KAFG;AAKZC,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe7B,UAAf;AALM,GAAd;AAOA;AACE8B,IAAAA,KAAK,CAAE,GAAEX,OAAO,CAACC,GAAR,CAAYW,mBAAoB,aAApC,EAAkDP,OAAlD,CAAL,CACGQ,IADH,CACSC,MAAD,IAAY;AAChB;AACR;AACA;AACA;AACA;AACQ,aAAO,IAAP;AACD,KARH,EASGC,KATH,CASUC,GAAD,IAAS;AACdrC,MAAAA,MAAM,CAACsC,IAAP,CAAY,MAAZ;AACA,aAAO,KAAP;AACD,KAZH;AAaD;AACF,CArDM","sourcesContent":["export const insertLead = (campaignData, formData, router) => {\r\n  let fullData = { ...campaignData };\r\n  fullData.formData = formData;\r\n\r\n  let dataToSend = {};\r\n  dataToSend.name = fullData.formData.name ? fullData.formData.name : \"\";\r\n  dataToSend.phone = fullData.formData.phoneNumber\r\n    ? fullData.formData.phoneNumber\r\n    : \"\";\r\n  dataToSend.condicoes = fullData.formData.termosEcondicoes\r\n    ? fullData.formData.termosEcondicoes\r\n    : \"\";\r\n  dataToSend.email = fullData.formData.email ? fullData.formData.email : \"\";\r\n  dataToSend.type = fullData.formData.formType\r\n    ? fullData.formData.formType\r\n    : \"\";\r\n\r\n  dataToSend.context = fullData.formData.context\r\n    ? fullData.formData.context\r\n    : \"\";\r\n  for (const utm in fullData.params) {\r\n    dataToSend[utm] = fullData.params[utm];\r\n  }\r\n  dataToSend.convcode = fullData.campaignData.defaultCampaignData.convcode\r\n    ? fullData.campaignData.defaultCampaignData.convcode\r\n    : \"\";\r\n  dataToSend.ip = fullData.campaignData.defaultCampaignData.ip;\r\n  dataToSend.source = fullData.campaignData.defaultCampaignData.source;\r\n  dataToSend.surname = fullData.campaignData.comercializador;\r\n  dataToSend.secret = process.env.NEXT_PUBLIC_API_SECRET;\r\n  console.log(dataToSend);\r\n  let options = {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(dataToSend),\r\n  };\r\n  {\r\n    fetch(`${process.env.NEXT_PUBLIC_API_URL}/api/insert`, options)\r\n      .then((result) => {\r\n        /*router.push(\r\n          `/gracias/?convtype=${dataToSend.tsource}${\r\n            dataToSend.convcode !== \"\" ? \"&conv=\" + dataToSend.convcode : \"\"\r\n          }`\r\n        );*/\r\n        return true;\r\n      })\r\n      .catch((err) => {\r\n        router.push(\"/404\");\r\n        return false;\r\n      });\r\n  }\r\n};\r\n"]},"metadata":{},"sourceType":"module"}